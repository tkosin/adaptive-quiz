"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { FileText, Download, Check, AlertCircle } from "lucide-react"
import { useQuizFiles } from "@/hooks/use-quiz-files"
import { Alert, AlertDescription } from "@/components/ui/alert"

export function SampleQuizLoader() {
  const [loading, setLoading] = useState<string | null>(null)
  const [loaded, setLoaded] = useState<string[]>([])
  const [error, setError] = useState<string | null>(null)
  const { saveQuizFile } = useQuizFiles()

  // ข้อสอบตัวอย่างแบบ hardcoded เพื่อหลีกเลี่ยงปัญหาการโหลดไฟล์
  const sampleQuizzes = [
    {
      id: "social-studies",
      name: "ข้อสอบวิชาสังคมศึกษา ป.6",
      data: {
        title: "ข้อสอบวิชาสังคมศึกษา ระดับชั้นประถมศึกษาปีที่ 6",
        totalQuestions: 10,
        createdDate: "2025-05-26",
        timeLimit: "60 นาที",
        examPrinciples: {
          description: "ข้อสอบชุดนี้ออกแบบตามหลักการวัดความรู้ความสามารถที่เหมาะสมกับนักเรียนระดับชั้นประถมศึกษาปีที่ 6",
          principles: [
            "หลักความเที่ยงตรงเชิงเนื้อหา - ข้อสอบครอบคลุมเนื้อหาตามหลักสูตรแกนกลางการศึกษาขั้นพื้นฐาน",
            "หลักความเหมาะสมกับระดับชั้น - ข้อสอบมีระดับความยากง่ายเหมาะสมกับนักเรียนชั้น ป.6",
            "หลักการวัดความรู้ความเข้าใจ - ข้อสอบวัดความรู้ความจำ ความเข้าใจ และการนำไปใช้",
            "หลักความสมดุล - ข้อสอบครอบคลุมเนื้อหาทุกหน่วยการเรียนรู้อย่างเหมาะสม",
          ],
        },
        examObjectives: {
          description: "วัตถุประสงค์ของข้อสอบชุดนี้",
          objectives: [
            "เพื่อวัดความรู้ความเข้าใจเกี่ยวกับประวัติศาสตร์ไทย",
            "เพื่อประเมินความรู้เกี่ยวกับภูมิศาสตร์และสิ่งแวดล้อม",
            "เพื่อทดสอบความเข้าใจเกี่ยวกับสังคมและวัฒนธรรมไทย",
            "เพื่อวัดความรู้เกี่ยวกับการเป็นพลเมืองดีและหน้าที่พลเมือง",
          ],
        },
        examStructure: {
          description: "โครงสร้างข้อสอบแบ่งตามหมวดความรู้",
          categories: [
            {
              name: "ประวัติศาสตร์ไทย",
              percentage: 30,
            },
            {
              name: "ภูมิศาสตร์และสิ่งแวดล้อม",
              percentage: 30,
            },
            {
              name: "สังคมและวัฒนธรรม",
              percentage: 20,
            },
            {
              name: "การเป็นพลเมืองดีและหน้าที่พลเมือง",
              percentage: 20,
            },
          ],
        },
        questions: [
          {
            id: 1,
            category: "ประวัติศาสตร์ไทย",
            question: "พระบาทสมเด็จพระจอมเกล้าเจ้าอยู่หัว (รัชกาลที่ 4) ทรงมีพระราชดำริในการปฏิรูปประเทศไทยด้านใดเป็นสำคัญ",
            options: {
              "1": "การศึกษาและวิทยาศาสตร์",
              "2": "การเกษตรและอุตสาหกรรม",
              "3": "การทหารและตำรวจ",
              "4": "การคมนาคมและขนส่ง",
            },
            answer: "1",
            explanation:
              "พระบาทสมเด็จพระจอมเกล้าเจ้าอยู่หัวทรงให้ความสำคัญกับการศึกษาและวิทยาศาสตร์ โดยทรงนำความรู้ด้านดาราศาสตร์และวิทยาศาสตร์สมัยใหม่เข้ามาในไทย",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับการปฏิรูปในสมัยรัชกาลที่ 4",
          },
          {
            id: 2,
            category: "ภูมิศาสตร์และสิ่งแวดล้อม",
            question: "แม่น้ำสายใดเป็นแม่น้ำสายหลักของภาคเหนือ",
            options: {
              "1": "แม่น้ำเจ้าพระยา",
              "2": "แม่น้ำปิง",
              "3": "แม่น้ำน่าน",
              "4": "แม่น้ำยม",
            },
            answer: "2",
            explanation: "แม่น้ำปิงเป็นแม่น้ำสายหลักของภาคเหนือ ไหลผ่านจังหวัดเชียงใหม่และลำปาง",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับแม่น้ำสายสำคัญของประเทศไทย",
          },
          {
            id: 3,
            category: "การเป็นพลเมืองดีและหน้าที่พลเมือง",
            question: "ข้อใดไม่ใช่หน้าที่ของพลเมืองไทยตามรัฐธรรมนูญ",
            options: {
              "1": "เคารพกฎหมาย",
              "2": "เสียภาษีอากร",
              "3": "รับราชการทหาร",
              "4": "เลือกตั้งผู้แทนราษฎร",
            },
            answer: "4",
            explanation:
              "การเลือกตั้งเป็นสิทธิของพลเมือง ไม่ใช่หน้าที่ ส่วนการเคารพกฎหมาย การเสียภาษี และการรับราชการทหารเป็นหน้าที่ของพลเมือง",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "การวิเคราะห์",
            testingObjective: "วัดความเข้าใจเกี่ยวกับสิทธิและหน้าที่ของพลเมือง",
          },
          {
            id: 4,
            category: "สังคมและวัฒนธรรม",
            question: "ประเพณีสงกรานต์มีความสำคัญต่อสังคมไทยอย่างไร",
            options: {
              "1": "เป็นการแสดงความเคารพต่อผู้ใหญ่และบรรพบุรุษ",
              "2": "เป็นการส่งเสริมการท่องเที่ยว",
              "3": "เป็นการรักษาสิ่งแวดล้อม",
              "4": "เป็นการส่งเสริมเศรษฐกิจ",
            },
            answer: "1",
            explanation: "ประเพณีสงกรานต์เป็นประเพณีที่แสดงความเคารพต่อผู้ใหญ่และบรรพบุรุษ ผ่านพิธีรดน้ำดำหัวและการขอพร",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับประเพณีและวัฒนธรรมไทย",
          },
          {
            id: 5,
            category: "ภูมิศาสตร์และสิ่งแวดล้อม",
            question: "ภาคใดของประเทศไทยมีพื้นที่ติดต่อกับประเทศเพื่อนบ้านมากที่สุด",
            options: {
              "1": "ภาคเหนือ",
              "2": "ภาคตะวันออกเฉียงเหนือ",
              "3": "ภาคกลาง",
              "4": "ภาคใต้",
            },
            answer: "1",
            explanation: "ภาคเหนือมีพื้นที่ติดต่อกับประเทศเพื่อนบ้าน 2 ประเทศ คือ พม่าและลาว โดยมีเส้นแบ่งเขตแดนยาวที่สุด",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับที่ตั้งและเขตแดนของประเทศไทย",
          },
          {
            id: 6,
            category: "ประวัติศาสตร์ไทย",
            question: "สมเด็จพระนเรศวรมหาราชทรงมีความสำคัญต่อประวัติศาสตร์ไทยในด้านใด",
            options: {
              "1": "การสร้างวัดและพระพุทธรูป",
              "2": "การต่อสู้เพื่อเอกราชจากพม่า",
              "3": "การสร้างระบบการศึกษา",
              "4": "การพัฒนาการเกษตร",
            },
            answer: "2",
            explanation: "สมเด็จพระนเรศวรมหาราชทรงต่อสู้เพื่อเอกราชของไทยจากการปกครองของพม่า และทรงประกาศเอกราชในปี พ.ศ. 2127",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับบุคคลสำคัญในประวัติศาสตร์ไทย",
          },
          {
            id: 7,
            category: "ภูมิศาสตร์และสิ่งแวดล้อม",
            question: "การอนุรักษ์ทรัพยากรธรรมชาติที่ถูกต้องคือข้อใด",
            options: {
              "1": "ใช้ทรัพยากรให้หมดเพื่อประโยชน์สูงสุด",
              "2": "ใช้ทรัพยากรอย่างประหยัดและยั่งยืน",
              "3": "หาทรัพยากรใหม่มาทดแทน",
              "4": "ปล่อยให้ธรรมชาติดูแลตัวเอง",
            },
            answer: "2",
            explanation: "การอนุรักษ์ทรัพยากรธรรมชาติที่ถูกต้องคือการใช้อย่างประหยัดและยั่งยืน เพื่อให้คนรุ่นหลังได้ใช้ประโยชน์ต่อไป",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับการอนุรักษ์สิ่งแวดล้อม",
          },
          {
            id: 8,
            category: "สังคมและวัฒนธรรม",
            question: "ข้อใดเป็นลักษณะสำคัญของสังคมไทยในอดีต",
            options: {
              "1": "การปกครองแบบประชาธิปไตย",
              "2": "การมีระบบชนชั้นที่ชัดเจน",
              "3": "การใช้เงินตราเป็นสื่อกลางการค้า",
              "4": "การมีโรงงานอุตสาหกรรมมากมาย",
            },
            answer: "2",
            explanation: "สังคมไทยในอดีตมีระบบชนชั้นที่ชัดเจน แบ่งเป็นชั้นกษัตริย์ ขุนนาง และสามัญชน",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับลักษณะของสังคมไทยในอดีต",
          },
          {
            id: 9,
            category: "ประวัติศาสตร์ไทย",
            question: "การปกครองระบบประชาธิปไตยในประเทศไทยเริ่มต้นเมื่อใด",
            options: {
              "1": "พ.ศ. 2475",
              "2": "พ.ศ. 2489",
              "3": "พ.ศ. 2500",
              "4": "พ.ศ. 2517",
            },
            answer: "1",
            explanation:
              "การปกครองระบบประชาธิปไตยในประเทศไทยเริ่มต้นเมื่อวันที่ 24 มิถุนายน พ.ศ. 2475 หลังการเปลี่ยนแปลงการปกครองโดยคณะราษฎร",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับเหตุการณ์สำคัญในประวัติศาสตร์ไทย",
          },
          {
            id: 10,
            category: "การเป็นพลเมืองดีและหน้าที่พลเมือง",
            question: "ข้อใดแสดงถึงการเป็นพลเมืองดีในสังคมประชาธิปไตย",
            options: {
              "1": "ทำตามที่ผู้ใหญ่สั่งเท่านั้น",
              "2": "ไม่สนใจเรื่องการเมืองการปกครอง",
              "3": "มีส่วนร่วมในกิจกรรมสาธารณะ",
              "4": "คิดแต่เรื่องส่วนตัวเท่านั้น",
            },
            answer: "3",
            explanation: "การเป็นพลเมืองดีในสังคมประชาธิปไตยคือการมีส่วนร่วมในกิจกรรมสาธารณะ เพื่อประโยชน์ของส่วนรวม",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "การนำไปใช้",
            testingObjective: "วัดความเข้าใจเกี่ยวกับการเป็นพลเมืองดีในสังคมประชาธิปไตย",
          },
        ],
      },
    },
    {
      id: "excavation-permit",
      name: "ข้อสอบการขออนุญาตขุดดินถมดิน",
      data: {
        title: "ข้อสอบการขออนุญาตขุดดินถมดิน",
        totalQuestions: 10,
        createdDate: "2025-05-26",
        timeLimit: "90 นาที",
        examPrinciples: {
          description: "ข้อสอบชุดนี้ออกแบบตามหลักการวัดความรู้ความสามารถด้านกฎหมายและระเบียบการขออนุญาตขุดดินถมดิน",
          principles: [
            "หลักความเที่ยงตรงเชิงเนื้อหา - ข้อสอบครอบคลุมกฎหมายและระเบียบที่เกี่ยวข้องกับการขุดดินถมดิน",
            "หลักความเหมาะสมกับผู้ปฏิบัติงาน - ข้อสอบมีระดับความยากง่ายเหมาะสมกับผู้ที่ต้องการขออนุญาต",
            "หลักการวัดความรู้เชิงปฏิบัติ - ข้อสอบวัดความรู้ที่สามารถนำไปใช้ในการปฏิบัติจริง",
            "หลักความครอบคลุม - ข้อสอบครอบคลุมทุกขั้นตอนของการขออนุญาตและการปฏิบัติตามกฎหมาย",
          ],
        },
        examObjectives: {
          description: "วัตถุประสงค์ของข้อสอบชุดนี้",
          objectives: [
            "เพื่อวัดความรู้ความเข้าใจเกี่ยวกับกฎหมายการขุดดินถมดิน",
            "เพื่อประเมินความรู้เกี่ยวกับขั้นตอนการขออนุญาต",
            "เพื่อทดสอบความเข้าใจเกี่ยวกับมาตรการป้องกันผลกระทบสิ่งแวดล้อม",
            "เพื่อวัดความรู้เกี่ยวกับหน้าที่และความรับผิดชอบของผู้ขออนุญาต",
          ],
        },
        examStructure: {
          description: "โครงสร้างข้อสอบแบ่งตามหมวดความรู้",
          categories: [
            {
              name: "กฎหมายและระเบียบที่เกี่ยวข้อง",
              percentage: 35,
            },
            {
              name: "ขั้นตอนการขออนุญาต",
              percentage: 25,
            },
            {
              name: "มาตรการป้องกันผลกระทบสิ่งแวดล้อม",
              percentage: 25,
            },
            {
              name: "หน้าที่และความรับผิดชอบ",
              percentage: 15,
            },
          ],
        },
        questions: [
          {
            id: 1,
            category: "กฎหมายและระเบียบที่เกี่ยวข้อง",
            question: "พระราชบัญญัติใดเป็นกฎหมายหลักที่ควบคุมการขุดดินถมดิน",
            options: {
              "1": "พระราชบัญญัติส่งเสริมและรักษาคุณภาพสิ่งแวดล้อมแห่งชาติ พ.ศ. 2535",
              "2": "พระราชบัญญัติการผังเมือง พ.ศ. 2518",
              "3": "พระราชบัญญัติควบคุมอาคาร พ.ศ. 2522",
              "4": "พระราชบัญญัติป่าไผ่ พ.ศ. 2484",
            },
            answer: "1",
            explanation:
              "พระราชบัญญัติส่งเสริมและรักษาคุณภาพสิ่งแวดล้อมแห่งชาติ พ.ศ. 2535 เป็นกฎหมายหลักที่ควบคุมการขุดดินถมดินเพื่อป้องกันผลกระทบต่อสิ่งแวดล้อม",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับกฎหมายพื้นฐานที่เกี่ยวข้อง",
          },
          {
            id: 2,
            category: "ขั้นตอนการขออนุญาต",
            question: "หน่วยงานใดเป็นผู้มีอำนาจในการออกใบอนุญาตขุดดินถมดิน",
            options: {
              "1": "กรมควบคุมมลพิษ",
              "2": "องค์การบริหารส่วนท้องถิ่น",
              "3": "กรมทรัพยากรธรณี",
              "4": "สำนักงานทรัพยากรธรรมชาติและสิ่งแวดล้อมจังหวัด",
            },
            answer: "2",
            explanation:
              "องค์การบริหารส่วนท้องถิ่น (เทศบาล องค์การบริหารส่วนตำบล) เป็นหน่วยงานที่มีอำนาจในการออกใบอนุญาตขุดดินถมดินในเขตพื้นที่ของตน",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับหน่วยงานที่เกี่ยวข้อง",
          },
          {
            id: 3,
            category: "กฎหมายและระเบียบที่เกี่ยวข้อง",
            question: "การขุดดินถมดินในพื้นที่ใดต้องขออนุญาตตามกฎหมาย",
            options: {
              "1": "เฉพาะในเขตเทศบาล",
              "2": "เฉพาะในเขตอุตสาหกรรม",
              "3": "ทุกพื้นที่ทั่วประเทศ",
              "4": "เฉพาะในเขตอนุรักษ์",
            },
            answer: "3",
            explanation: "การขุดดินถมดินในทุกพื้นที่ทั่วประเทศต้องขออนุญาตตามกฎหมาย เพื่อควบคุมผลกระทบต่อสิ่งแวดล้อมและความปลอดภัย",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับขอบเขตการบังคับใช้กฎหมาย",
          },
          {
            id: 4,
            category: "ขั้นตอนการขออนุญาต",
            question: "เอกสารใดไม่จำเป็นต้องแนบในการขออนุญาตขุดดินถมดิน",
            options: {
              "1": "แผนที่แสดงบริเวณที่จะขุดดินถมดิน",
              "2": "รายงานการประเมินผลกระทบสิ่งแวดล้อม",
              "3": "หนังสือรับรองการแพทย์ของผู้ขออนุญาต",
              "4": "แผนการป้องกันและแก้ไขผลกระทบ",
            },
            answer: "3",
            explanation:
              "หนังสือรับรองการแพทย์ของผู้ขออนุญาตไม่จำเป็นต้องแนบในการขออนุญาตขุดดินถมดิน เนื่องจากไม่เกี่ยวข้องกับการประเมินผลกระทบ",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับเอกสารที่ต้องใช้ในการขออนุญาต",
          },
          {
            id: 5,
            category: "มาตรการป้องกันผลกระทบสิ่งแวดล้อม",
            question: "มาตรการใดเป็นวิธีป้องกันฝุ่นละอองจากการขุดดินถมดิน",
            options: {
              "1": "การพ่นน้ำในบริเวณที่ทำงาน",
              "2": "การทำงานในเวลากลางคืนเท่านั้น",
              "3": "การใช้เครื่องจักรขนาดใหญ่",
              "4": "การเพิ่มจำนวนคนงาน",
            },
            answer: "1",
            explanation: "การพ่นน้ำในบริเวณที่ทำงานเป็นมาตรการที่มีประสิทธิภาพในการลดฝุ่นละอองที่เกิดจากการขุดดินถมดิน",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับมาตรการป้องกันผลกระทบสิ่งแวดล้อม",
          },
          {
            id: 6,
            category: "หน้าที่และความรับผิดชอบ",
            question: "ผู้ได้รับอนุญาตขุดดินถมดินมีหน้าที่ใดต่อไปนี้",
            options: {
              "1": "แจ้งให้เจ้าหน้าที่ทราบก่อนเริ่มงาน 7 วัน",
              "2": "แจ้งให้เจ้าหน้าที่ทราบก่อนเริ่มงาน 15 วัน",
              "3": "แจ้งให้เจ้าหน้าที่ทราบก่อนเริ่มงาน 30 วัน",
              "4": "ไม่จำเป็นต้องแจ้งล่วงหน้า",
            },
            answer: "2",
            explanation:
              "ผู้ได้รับอนุญาตขุดดินถมดินมีหน้าที่แจ้งให้เจ้าหน้าที่ทราบก่อนเริ่มงานอย่างน้อย 15 วัน เพื่อให้เจ้าหน้าที่สามารถเตรียมการตรวจสอบ",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับหน้าที่ของผู้ขออนุญาต",
          },
          {
            id: 7,
            category: "กฎหมายและระเบียบที่เกี่ยวข้อง",
            question: "อัตราค่าธรรมเนียมการขออนุญาตขุดดินถมดินกำหนดโดยหน่วยงานใด",
            options: {
              "1": "กระทรวงมหาดไทย",
              "2": "กระทรวงทรัพยากรธรรมชาติและสิ่งแวดล้อม",
              "3": "องค์การบริหารส่วนท้องถิ่น",
              "4": "กรมควบคุมมลพิษ",
            },
            answer: "3",
            explanation: "องค์การบริหารส่วนท้องถิ่นเป็นผู้กำหนดอัตราค่าธรรมเนียมการขออนุญาตขุดดินถมดินในเขตพื้นที่ของตน ตามข้อบัญญัติท้องถิ่น",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับอำนาจหน้าที่ของหน่วยงาน",
          },
          {
            id: 8,
            category: "มาตรการป้องกันผลกระทบสิ่งแวดล้อม",
            question: "การขุดดินถมดินในพื้นที่ใกล้แหล่งน้ำต้องมีมาตรการป้องกันอย่างไร",
            options: {
              "1": "สร้างคันดินกั้นน้ำ",
              "2": "ขุดในฤดูแล้งเท่านั้น",
              "3": "ใช้เครื่องจักรขนาดเล็ก",
              "4": "ทำงานในเวลากลางวันเท่านั้น",
            },
            answer: "1",
            explanation: "การสร้างคันดินกั้นน้ำเป็นมาตรการสำคัญในการป้องกันดินและตะกอนไหลลงสู่แหล่งน้ำ ซึ่งอาจทำให้เกิดการตื้นเขินและมลพิษ",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับมาตรการป้องกันเฉพาะพื้นที่",
          },
          {
            id: 9,
            category: "ขั้นตอนการขออนุญาต",
            question: "ระยะเวลาในการพิจารณาอนุญาตขุดดินถมดินโดยทั่วไปคือกี่วัน",
            options: {
              "1": "15 วัน",
              "2": "30 วัน",
              "3": "45 วัน",
              "4": "60 วัน",
            },
            answer: "2",
            explanation: "ระยะเวลาในการพิจารณาอนุญาตขุดดินถมดินโดยทั่วไปคือ 30 วัน นับจากวันที่ได้รับคำขอพร้อมเอกสารครบถ้วน",
            difficultyLevel: "ง่าย",
            knowledgeLevel: "ความรู้ความจำ",
            testingObjective: "วัดความรู้เกี่ยวกับระยะเวลาดำเนินการ",
          },
          {
            id: 10,
            category: "หน้าที่และความรับผิดชอบ",
            question: "หากผู้ได้รับอนุญาตไม่ปฏิบัติตามเงื่อนไขที่กำหนด จะได้รับโทษอย่างไร",
            options: {
              "1": "เพียงแค่ตักเตือน",
              "2": "ปรับเงินและเพิกถอนใบอนุญาต",
              "3": "ระงับการทำงานชั่วคราว",
              "4": "ต้องขออนุญาตใหม่",
            },
            answer: "2",
            explanation: "หากผู้ได้รับอนุญาตไม่ปฏิบัติตามเงื่อนไขที่กำหนด อาจได้รับโทษปรับเงินและเพิกถอนใบอนุญาต ตามความร้ายแรงของการฝ่าฝืน",
            difficultyLevel: "ปานกลาง",
            knowledgeLevel: "ความรู้ความเข้าใจ",
            testingObjective: "วัดความรู้เกี่ยวกับบทลงโทษ",
          },
        ],
      },
    },
  ]

  const loadSampleQuiz = async (id: string, name: string, data: any) => {
    try {
      setLoading(id)
      setError(null)

      // ใช้ข้อมูลที่มีอยู่แล้วแทนการโหลดจากไฟล์
      saveQuizFile(name, data)

      setLoaded((prev) => [...prev, id])
      setTimeout(() => {
        setLoading(null)
      }, 1000)
    } catch (error) {
      console.error("Error loading sample quiz:", error)
      setError("เกิดข้อผิดพลาดในการโหลดข้อสอบตัวอย่าง")
      setLoading(null)
    }
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle className="text-lg">ข้อสอบตัวอย่าง</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          <p className="text-sm text-gray-600">คุณสามารถโหลดข้อสอบตัวอย่างเพื่อทดลองใช้งานได้</p>

          {error && (
            <Alert variant="destructive" className="mb-4">
              <AlertCircle className="h-4 w-4" />
              <AlertDescription>{error}</AlertDescription>
            </Alert>
          )}

          <div className="grid grid-cols-1 gap-3">
            {sampleQuizzes.map((quiz) => (
              <div key={quiz.id} className="flex items-center justify-between border rounded-lg p-3">
                <div className="flex items-center gap-2">
                  <FileText className="h-5 w-5 text-blue-500" />
                  <span>{quiz.name}</span>
                </div>
                <Button
                  variant={loaded.includes(quiz.id) ? "outline" : "default"}
                  size="sm"
                  onClick={() => loadSampleQuiz(quiz.id, quiz.name, quiz.data)}
                  disabled={loading !== null}
                  className={loaded.includes(quiz.id) ? "text-green-600 border-green-600" : ""}
                >
                  {loading === quiz.id ? (
                    <span className="flex items-center gap-1">
                      <span className="animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full" />
                      กำลังโหลด...
                    </span>
                  ) : loaded.includes(quiz.id) ? (
                    <span className="flex items-center gap-1">
                      <Check className="h-4 w-4" />
                      โหลดแล้ว
                    </span>
                  ) : (
                    <span className="flex items-center gap-1">
                      <Download className="h-4 w-4" />
                      โหลด
                    </span>
                  )}
                </Button>
              </div>
            ))}
          </div>
        </div>
      </CardContent>
    </Card>
  )
}
